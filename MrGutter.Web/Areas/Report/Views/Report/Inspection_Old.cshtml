@{
    Layout = "_Layout_CreateReport";
    ViewBag.Title = "Inspection";
}


<div class="flex-shrink-1 container-fluid flex-grow-1 container-p-x container-p-y pt-0">

    <div class="layout-demo-wrapper">
        <div class="layout-demo-placeholder w-100">
            <div class="row">
                <div class="col-12">
                    @*  <h5 class="mb-0">Page Content</h5> *@
                    <div class="d-flex justify-content-between mb-1">
                        <div>
                            <h5 class="mb-0">
                                <span id="Inspection-text"> <b>Inspection Page</b></span>
                                <a href="#" id="edit-Inspection-link" title="Edit the Inspection page">
                                    <i class="ti ti-edit"></i>
                                </a>
                            </h5>
                            <input type="text" id="Inspection-input" class="form-control" style="display: none;" />
                        </div>
                        <div class="col-4 text-end">
                            <button type="button" class="btn btn-outline-primary waves-effect" data-bs-target="#fullscreenModal" data-bs-toggle="modal" data-bs-dismiss="modal">View Page</button>
                        </div>


                    </div>

                    <!--Changes-->
                    <div class="card mb-6 mt-4">
                        <!-- Account -->
                        <div class="card-body pt-4">
                            <form id="formAccountSettings" method="GET" onsubmit="return false" class="form-repeater">
                                <div id="sections-container">
                                    <!-- Existing Sections -->
                                    <div class="section" data-section-index="1">
                                        <div class="row">
                                            <div class="mb-4 col-md-6">
                                                <b class="form-label">Inspection</b>
                                                <b class="form-label">
                                                    Style: <b>Standard</b>
                                                    <a href="#" data-bs-toggle="modal" data-bs-target="#exLargeModal">Change</a>
                                                </b>
                                            </div>
                                            <div class="mb-4 col-md-6 text-end">
                                                <span>
                                                    <a href="#" title="Delete Section" class="btn btn-icon btn-outline-secondary waves-effect">
                                                        <i class="ti ti-lg ti-trash-filled "></i>
                                                    </a>
                                                </span>
                                            </div>
                                            <div class="items-container">






                                                <div class="item mb-4">
                                                    <div class="row">
                                                        <div class="mb-4 col-md-5 pe-0">

                                                            <div class="card h-100">
                                                                <div class="card-body">
                                                                    <div action="/upload" class="dropzone needsclick h-100" id="dropzone-basic">
                                                                        <div class="dz-message needsclick">
                                                                            Drop files here or click to upload
                                                                        </div>
                                                                        <div class="fallback">
                                                                            <input name="file" type="file" />
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="mb-4 col-md-6">
                                                            <div class="card">
                                                                <div class="card-body">
                                                                    <div id="snow-toolbar">
                                                                        <span class="ql-formats">
                                                                            <select class="ql-font"></select>
                                                                            <select class="ql-size"></select>
                                                                        </span>
                                                                        <span class="ql-formats">
                                                                            <button class="ql-bold"></button>
                                                                            <button class="ql-italic"></button>
                                                                            <button class="ql-underline"></button>
                                                                        </span>
                                                                    </div>
                                                                    <div class="snow-editor">
                                                                        Type something...
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="mb-4 col-md-1 ps-0 text-end">
                                                            <span>
                                                                <a href="#" title="Delete Item" class="btn btn-icon btn-outline-secondary waves-effect">
                                                                    <i class="ti ti-lg ti-trash-filled "></i>
                                                                </a>
                                                            </span>
                                                        </div>
                                                    </div>



                                                </div>
                                            </div>
                                            <div class="mt-1 mb-2">
                                                <button type="button" class="btn btn-outline-primary waves-effect add-item-btn">Add Item</button>

                                            </div>

                                        </div>
                                    </div>
                                </div>
                                <hr />
                                <div class="mt-1">
                                    <button type="button" class="btn btn-outline-primary waves-effect" id="add-section-btn">Add Section</button>
                                </div>
                            </form>
                        </div>
                        <!-- /Account -->
                    </div>











                </div>

            </div>
        </div>
    </div>
</div>

<!--Modal for View page button-->
<div class="col-lg-4 col-md-6">
    <div class="mt-4">
        <div class="modal fade" id="fullscreenModal" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-fullscreen" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="modalFullTitle">Review</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">

                        <div style="width: 100%; height: 100%; border: 1px solid #ccc;">
                            <iframe src="@Url.Content("~/report_view_pages/reportinspection.pdf")" width="100%" height="100%" style="border: none;"></iframe>
                        </div>


                    </div>
                    @*     <div class="modal-footer">
                    <button type="button" class="btn btn-label-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                    </div> *@
                </div>
            </div>
        </div>
    </div>
</div>



<div class="modal fade" id="exLargeModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel4">Choose your section style</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <hr />
            <div class="modal-body">
                <div class="row">
                    <div class="col-2">
                    </div>
                    <div class="col-5">
                        <span>
                            <label><strong>Standard</strong></label> Fits 2 per page
                        </span>
                        <div style="display: flex; align-items: center;" class="mt-4">
                            <input type="radio" name="radio-group" id="option1" style="margin-right: 10px;" />
                            <div class="card">
                                <!-- The card is now empty without the <h1> -->
                                <img src="~/inspection/fittwoperpage.png" />
                            </div>
                        </div>
                    </div>

                    <!-- Second Column -->
                    <div class="col-5">
                        <span>
                            <label>
                                <strong>
                                    Side-by-side
                                </strong>
                            </label> Fits 4 per page
                        </span>
                        <div style="display: flex; align-items: center;" class="mt-4">
                            <input type="radio" name="radio-group" id="option2" style="margin-right: 10px;" />
                            <div class="card">
                                <!-- The card is now empty without the <h1> -->
                                <img src="~/inspection/fitfourperpage.png" />
                            </div>
                        </div>
                    </div>

                </div>

                <div class="row mt-4">
                    <div class="col-2">
                    </div>
                    <div class="col-5">
                        <span>
                            <label><strong>Wide</strong></label> Fits 2 per page
                        </span>
                        <div style="display: flex; align-items: center;" class="mt-4">
                            <input type="radio" name="radio-group" id="option1" style="margin-right: 10px;" />
                            <div class="card">
                                <!-- The card is now empty without the <h1> -->
                                <img src="~/inspection/widefittwoperpage.png" />
                            </div>
                        </div>
                    </div>

                    <!-- Second Column -->
                    <div class="col-5">
                        <span>
                            <label>
                                <strong>
                                    Full
                                </strong>
                            </label> Fits 1 per page
                        </span>
                        <div style="display: flex; align-items: center;" class="mt-4">
                            <input type="radio" name="radio-group" id="option2" style="margin-right: 10px;" />
                            <div class="card">
                                <!-- The card is now empty without the <h1> -->
                                <img src="~/inspection/fullfitoneperpage.png" />
                            </div>
                        </div>
                    </div>
                </div>



            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-label-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save</button>
            </div>
        </div>
    </div>
</div>



<!--Script for View page button-->
<script>
    const pdfUrl = '@Url.Content("~/report_view_pages/reportinspection.pdf")';

    pdfjsLib.getDocument(pdfUrl).promise.then(pdfDoc => {
        const pdfViewer = document.getElementById('pdfViewer');
        for (let i = 1; i <= pdfDoc.numPages; i++) {
            pdfDoc.getPage(i).then(page => {
                const viewport = page.getViewport({ scale: 1.5 });
                const canvas = document.createElement('canvas');
                const context = canvas.getContext('2d');
                canvas.width = viewport.width;
                canvas.height = viewport.height;
                pdfViewer.appendChild(canvas);

                page.render({ canvasContext: context, viewport: viewport });
            });
        }
    }).catch(error => console.error('Error loading PDF:', error));
</script>


<!--Script for edit title text-->
<script>
    document.getElementById('edit-Inspection-link').addEventListener('click', function (e) {
        e.preventDefault();
        var titleText = document.getElementById('Inspection-text');
        var titleInput = document.getElementById('Inspection-input');
        var editIcon = document.getElementById('edit-Inspection-link');
        if (titleInput.style.display === 'none') {
            titleInput.style.display = 'inline-block';
            titleInput.value = titleText.innerText;
            titleText.style.display = 'none';
            editIcon.style.display = 'none';

            titleInput.focus();
        } else {
            titleText.innerText = titleInput.value;
            titleInput.style.display = 'none';
            titleText.style.display = 'inline-block';
            editIcon.style.display = 'inline-block';
        }
    });
    document.addEventListener('click', function (e) {
        var titleText = document.getElementById('Inspection-text');
        var titleInput = document.getElementById('Inspection-input');
        var editIcon = document.getElementById('edit-Inspection-link');
        if (!titleText.contains(e.target) && !titleInput.contains(e.target) && !editIcon.contains(e.target)) {
            if (titleInput.style.display === 'inline-block') {
                titleText.innerText = titleInput.value;
                titleInput.style.display = 'none';
                titleText.style.display = 'inline-block';
                editIcon.style.display = 'inline-block';
            }
        }
    });


</script>


<script>


    document.addEventListener("DOMContentLoaded", () => {
        const sectionsContainer = document.getElementById("sections-container");

        // Template for an item
        const getItemTemplate = () => `

            <div class="item mb-4 row">
                <div class="mb-4 col-md-5 pe-0">

                    <div class="card">
                        <div class="card-body">
                            <div action="/upload" class="dropzone needsclick" id="dropzone-basic">
                                <div class="dz-message needsclick">
                                    Drop files here or click to upload
                                </div>
                                <div class="fallback">
                                    <input name="file" type="file" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mb-4 col-md-6">
                    <div class="card">
                        <div class="card-body">
                            <div id="snow-toolbar1">
                                <span class="ql-formats">
                                    <select class="ql-font"></select>
                                    <select class="ql-size"></select>
                                </span>
                                <span class="ql-formats">
                                    <button class="ql-bold"></button>
                                    <button class="ql-italic"></button>
                                    <button class="ql-underline"></button>
                                </span>
                            </div>
                            <div class="snow-editor1">
                                Type something...
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mb-4 col-md-1 ps-0 text-end">
                    <span>
                                <a href="#" title="Delete Item" class="btn btn-icon btn-outline-secondary waves-effect">
                            <i class="ti ti-lg ti-trash-filled"></i>
                        </a>
                    </span>
                </div>
            </div>`;

        // Template for a section
        const getSectionTemplate = (index) => `
            <div class="section mb-4" data-section-index="${index}">
                <div class="row">
                    <div class="mb-4 col-md-6">
                        <b class="form-label">Inspection</b>
                        <b class="form-label">Style: <b>Standard</b>
                            <a href="#" data-bs-toggle="modal" data-bs-target="#exLargeModal">Change</a>
                        </b>
                    </div>
                    <div class="mb-4 col-md-6 ps-0 text-end">
                        <span>
                                    <a href="#" title="Delete Section" class="btn btn-icon btn-outline-secondary waves-effect">
                                <i class="ti ti-lg ti-trash-filled"></i>
                            </a>
                        </span>
                    </div>
                    <div class="items-container">
                        ${getItemTemplate()}
                    </div>
                    <div class="mt-1">
                    <button type="button" class="btn btn-outline-primary waves-effect add-item-btn">Add Item</button>
                    </div>
                </div>
            </div>`;

        // Add new section
        document.getElementById("add-section-btn").addEventListener("click", () => {
            const sectionIndex = sectionsContainer.children.length + 1;
            const newSection = getSectionTemplate(sectionIndex);
            sectionsContainer.insertAdjacentHTML("beforeend", newSection);
            initializeQuillEditors();
        });

        // Add new item
        sectionsContainer.addEventListener("click", (e) => {
            if (e.target.closest(".add-item-btn")) {
                const section = e.target.closest(".section");
                const itemsContainer = section.querySelector(".items-container");
                itemsContainer.insertAdjacentHTML("beforeend", getItemTemplate());
                initializeQuillEditors();
            }
        });

        // Delete section
        sectionsContainer.addEventListener("click", (e) => {
            if (e.target.closest(".delete-section")) {
                const section = e.target.closest(".section");
                section.remove();
            }
        });

        // Delete item
        sectionsContainer.addEventListener("click", (e) => {
            if (e.target.closest(".delete-item")) {
                const item = e.target.closest(".item");
                item.remove();
            }
        });

        // Initialize Quill editors for all new editors
        function initializeQuillEditors() {
            document.querySelectorAll(".snow-editor").forEach((editor) => {
                if (!editor.classList.contains("ql-container")) {
                    new Quill(editor, {
                        theme: "snow",
                        modules: { toolbar: "#snow-toolbar" },
                    });
                }
            });
        }

        initializeQuillEditors();
    });




</script>

<!--Mine-->
@* <div class="container-xxl flex-grow-1 container-p-y">

    <div class="flex-shrink-1 container-fluid flex-grow-1 container-p-x container-p-y">

        <div class="layout-demo-wrapper">
            <div class="layout-demo-placeholder">
                <div class="row">
                    <div class="col-12">
                        <h6>Page Content</h6>
                        <div class="d-flex justify-content-between align-items-center mb-1">
                            <h5 class="">
                                Inspection <a href="#" title="Edit the page title"><i class="ti ti-edit"></i></a>
                            </h5>
                            <!-- Button trigger modal -->
                            <button type="button" class="btn btn-outline-primary waves-effect">View Page</button>
                        </div>

                        <div class="card mb-6">
                            <!-- Account -->
                            <div class="card-body pt-4">
                                <form id="formAccountSettings" method="GET" onsubmit="return false">
                                    <div class="row">
                                        <div class="mb-4 col-md-6">
                                            <b for="reporttype" class="form-label">Inspection</b>
                                            <b class="form-label">Style: <b>Standard</b> <a href="#">Change</a></b>
                                        </div>
                                        <div class="mb-4 col-md-6 text-end">
                                            <span><a href="#" title="Delete"><i class="ti ti-lg ti-trash-filled text-danger me-2"></i></a></span>
                                        </div>
                                        <div class="mb-4 col-md-4" hidden>
                                            <label for="dropzone-basic1" class="form-label">Primary Image</label>
                                            <div class="col-12">
                                                <div class="card mb-6">
                                                    <div class="card-body">
                                                        <form action="/upload" class="dropzone needsclick" id="dropzone-basic1">
                                                            <div class="dz-message needsclick">
                                                                Drop files here or click to upload
                                                                <span class="note needsclick">
                                                                    (This is just a demo dropzone. Selected files are <span class="fw-medium">not</span> actually uploaded.)
                                                                </span>
                                                            </div>
                                                            <div class="fallback">
                                                                <input name="file" type="file" />
                                                            </div>
                                                        </form>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                        <hr>
                                        <div class="mb-4 col-md-5">

                                            <div class="col-12 d-flex">
                                                <i class="drag-handle cursor-move ti ti-menu-2 align-text-bottom me-2"></i>
                                                <div class="card mb-6">
                                                    <div class="card-body">

                                                        <form action="/upload" class="dropzone needsclick" id="dropzone-basic">
                                                            <div class="dz-message needsclick">
                                                                Drop files here or click to upload
                                                                <span class="note needsclick">
                                                                    (This is just a demo dropzone. Selected files are <span class="fw-medium">not</span> actually uploaded.)
                                                                </span>
                                                            </div>
                                                            <div class="fallback">
                                                                <input name="file" type="file" />
                                                            </div>
                                                        </form>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="mb-4 col-md-6">
                                            <div class="input-group input-group-merge">
                                                <div class="col-12">
                                                    <div class="card mb-6">
                                                        <h5 class="card-header">Snow Theme</h5>
                                                        <div class="card-body">
                                                            <div id="snow-toolbar">
                                                                <span class="ql-formats">
                                                                    <select class="ql-font"></select>
                                                                    <select class="ql-size"></select>
                                                                </span>
                                                                <span class="ql-formats">
                                                                    <button class="ql-bold"></button>
                                                                    <button class="ql-italic"></button>
                                                                    <button class="ql-underline"></button>
                                                                    <button class="ql-strike"></button>
                                                                </span>
                                                                <span class="ql-formats">
                                                                    <select class="ql-color"></select>
                                                                    <select class="ql-background"></select>
                                                                </span>
                                                                <span class="ql-formats">
                                                                    <button class="ql-script" value="sub"></button>
                                                                    <button class="ql-script" value="super"></button>
                                                                </span>
                                                                <span class="ql-formats">
                                                                    <button class="ql-header" value="1"></button>
                                                                    <button class="ql-header" value="2"></button>
                                                                    <button class="ql-blockquote"></button>
                                                                    <button class="ql-code-block"></button>
                                                                </span>
                                                            </div>
                                                            <div id="snow-editor">
                                                                Hello,
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="mb-4 col-md-1 text-end">
                                            <span><a href="#" title="Delete"><i class="ti ti-lg ti-trash-filled text-danger me-2"></i></a></span>
                                        </div>
                                    </div>
                                    <div class="mt-1">
                                        <button type="submit" class="btn btn-outline-info waves-effect me-3">Add item</button>
                                    </div>
                                    <hr />
                                    <div class="mt-1">
                                        <button type="submit" class="btn btn-outline-info waves-effect me-3">Add section</button>
                                    </div>
                                </form>
                            </div>
                            <!-- /Account -->
                        </div>

                    </div>

                </div>
            </div>
        </div>
    </div>

</div> *@