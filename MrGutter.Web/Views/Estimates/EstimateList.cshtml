@{
    Layout = "_Layout_Main";
    ViewBag.Title = "Estimate";
}
<style>
    .hidden {
        display: none;
    }
    .bg-blue {
        background-color: #007bff; /* Choose a shade of blue */
    }

  

    div.dataTables_wrapper div.dataTables_length, div.dataTables_wrapper .dataTables_filter {
        margin-top: 0 !important;
        margin-bottom: 0 !important;
    }
    .top-right-dropdown {
        position: absolute;
        top: 5px;
        right: 5px;
        z-index: 1;
    }
    /* .layout-page{
                max-width: 1300px !important;
                margin: 0 auto !important;
            } */
    .card-img-height {
        height: 200px;
        width: 100%;
        object-fit: cover;
    }

    .form-select-1 {
        border-radius: 4px;
        background: #64c5b1;
        padding: 5px;
        border: 0;
        outline: none;
    }

    .select-radio {
        border-radius: 4px;
        background: #2E7DB3;
        padding: 5px;
        border: 0;
        color: white;
        text-align: center;
        outline: none;
        margin-bottom: 5px;
    }

    .select-radio1 {
        border-radius: 4px;
        background: transparent;
        padding: 5px;
        border: 1px solid #ccc;
        text-align: center;
        outline: none;
        cursor: pointer;
        margin-bottom: 5px;
    }

    .dtl-btn {
        padding: 10px 10px 16px 18px;
        border-radius: 0px 0px 0px 50px;
        background: #2E7DB3;
    }
    /* .dlt-btn{
                display:none;
                transition: all 0.5s ease-out;
            }

            .card:hover .dlt-btn{
                    display:block;
                    transition: all 0.5s ease-out;
             } */
    .dlt-btn {
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s ease-out, visibility 0.3s ease-out;
    }

    .card:hover .dlt-btn {
        opacity: 1;
        visibility: visible;
    }

    .card-img-top {
        height: 200px;
        object-fit: cover;
    }

</style>




<div class="container-xxl flex-grow-1">

    <div class="col-md-12 container-p-y">
        <div class="card">

            <div class="card-header d-flex justify-content-between align-items-center row px-1 gap-3 gap-md-0">

                <div class="col-md-2">
                    <div class="input-group">
                       
                        <input type="search" id="searchInput" class="form-control" placeholder="Search" name="Search" />
                    </div>
                </div>

                <div class="col-md-2 user_role">
                    <select id="userRole" class="form-select text-capitalize">
                        <option value="Select">Estimator</option>
                        <option value="Admin">John Doe</option>
                        <option value="Allen">Allen</option>
                        <option value="George">George</option>
                    </select>
                </div>

                <div class="col-md-2 user_plan">
                    <select id="userPlan" class="form-select text-capitalize">
                        <option value="Status">Estimate Status</option>
                        <option value="Requested">Requested</option>
                        <option value="Cancelled">Cancelled</option>
                        <option value="Accepted">Accepted</option>
                        <option value="Provided">Provided</option>
                        <option value="Completed">Completed</option>
                        <option value="Revised">Revised</option>
                    </select>
                </div>

                <div class="col-md-2 user_status">
                    <select id="userStatus" class="form-select text-capitalize">
                        <option value="Created anytime">Created anytime</option>
                        <option value="24">Last 24 hours</option>
                        <option value="7">Last 7 days</option>
                        <option value="30">Last 30 days</option>
                        <option value="Older">Older (than 30 days)</option>
                    </select>
                </div>

                <div class="col-md-1">
                    <a href="#" id="clearAllBtn" class="text-decoration-underline">Clear all</a>
                </div>

                <!-- Script for reset all the input fields of filter -->
                <script>
                    document.addEventListener("DOMContentLoaded", function () {
                        document.getElementById("clearAllBtn").addEventListener("click", function (e) {
                            e.preventDefault();

                            // Reset input field
                            const searchInput = document.getElementById("searchInput");
                            if (searchInput) searchInput.value = "";

                            // Reset select fields
                            const userRole = document.getElementById("userRole");
                            const userPlan = document.getElementById("userPlan");
                            const userStatus = document.getElementById("userStatus");

                            if (userRole) userRole.selectedIndex = 0;
                            if (userPlan) userPlan.selectedIndex = 0;
                            if (userStatus) userStatus.selectedIndex = 0;
                        });
                    });
                </script>
                <!-- Script end -->

                <div class="col-md-3 d-flex justify-content-end align-items-center">
                    <a href="#" data-bs-toggle="modal"
                       data-bs-target="#modalSignature" class="btn btn-primary tf-icons  scaleX-n1-rtl" title="Create Estimate">
                        <span class="ti ti-plus me-2"></span>
                        Estimate
                   </a>
                    <div class="border-start mx-3 pl-2" style="height: 30px;"></div>
                    <div class="px-3">
                        <a id="gridIcon" href="#" onclick="switchToGrid()" class="menu-item ti ti-layout-grid-filled" title="Tile view"></a>
                        <a id="listIcon" href="#" onclick="switchToList()" class="menu-item ti ti-list" title="List view"></a>
                    </div>
                </div>


                <!--Modal for Create Estimate button-->
                <div class="modal fade" id="modalSignature" tabindex="-1" aria-hidden="true">
                    <div class="modal-dialog  modal-xl" role="document">

                        <div class="">
                            <div class="">

                                <div class="modal-content m-4">

                                    <div class="modal-header">
                                        <div>
                                            <h3 class="mb-0">Create new estimate</h3>
                                            <p>Input customer details below to begin creating new reports</p>
                                        </div>

                                        <button type="button"
                                                class="btn-close"
                                                data-bs-dismiss="modal"
                                                aria-label="Close"></button>
                                    </div>

                                    <div class="modal-body">

                                        <div class="card">
                                            <div class="card-body">
                                                <form>
                                                    <div class="row">
                                                        <div class="col-md-6 mb-6">
                                                            <label class="form-label" for="basic-default-project">Estimate No.</label>
                                                            <input type="text" class="form-control" id="basic-default-project" placeholder="Leave blank to generate" />
                                                        </div>
                                                        <div class="col-md-6 mb-6">
                                                            <label class="form-label" for="basic-default-first">First name</label>
                                                            <input type="text" class="form-control" id="basic-default-first" placeholder="" />
                                                        </div>
                                                    </div>

                                                    <div class="row">
                                                        <div class="col-md-6 mb-6">
                                                            <label class="form-label" for="basic-default-last">Last name</label>
                                                            <input type="text" class="form-control" id="basic-default-last" placeholder="" />
                                                        </div>
                                                        <div class="col-md-6 mb-6">
                                                            <label class="form-label" for="basic-default-company">Company</label>
                                                            <input type="text" class="form-control" id="basic-default-company" placeholder="ACME Inc." />
                                                        </div>
                                                    </div>

                                                    <div class="row">
                                                        <div class="col-md-6 mb-6">
                                                            <label class="form-label" for="basic-default-email">Email</label>
                                                            <div class="input-group input-group-merge">
                                                                <input type="text"
                                                                       id="basic-default-email"
                                                                       class="form-control"
                                                                       placeholder="john.doe"
                                                                       aria-label="john.doe"
                                                                       aria-describedby="basic-default-email2" />
                                                                <span class="input-group-text" id="basic-default-email2">@@example.com</span>
                                                            </div>
                                                            <div class="form-text">You can use letters, numbers & periods</div>
                                                        </div>
                                                        <div class="col-md-6 mb-6">
                                                            <label class="form-label" for="basic-default-phone">Phone No</label>
                                                            <input type="text"
                                                                   id="basic-default-phone"
                                                                   class="form-control phone-mask"
                                                                   placeholder="658 799 8941" />
                                                        </div>
                                                    </div>

                                                    <div class="row">
                                                        <div class="col-md-6 mb-6">
                                                            <label class="form-label" for="basic-default-line1">Address line 1</label>
                                                            <input type="text" class="form-control" id="basic-default-line1" placeholder="" />
                                                        </div>
                                                        <div class="col-md-6 mb-6">
                                                            <label class="form-label" for="basic-default-line2">Address line 2</label>
                                                            <input type="text" class="form-control" id="basic-default-line2" placeholder="" />
                                                        </div>
                                                    </div>

                                                    <div class="row">
                                                        <div class="col-md-4 mb-6">
                                                            <label class="form-label" for="basic-default-city">City</label>
                                                            <input type="text" class="form-control" id="basic-default-city" placeholder="" />
                                                        </div>
                                                        <div class="col-md-4 mb-6">
                                                            <label class="form-label" for="basic-default-state">State</label>
                                                            <input type="text" class="form-control" id="basic-default-state" placeholder="" />
                                                        </div>
                                                        <div class="col-md-4 mb-6">
                                                            <label class="form-label" for="basic-default-zip">Zip code/Postal code</label>
                                                            <input type="text" class="form-control" id="basic-default-zip" placeholder="" />
                                                        </div>
                                                    </div>



                                                </form>
                                            </div>

                                        </div>



                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-primary">Create Estimate</button>
                                        <button type="button" class="btn btn-label-secondary" data-bs-dismiss="modal">
                                            Cancel
                                        </button>

                                    </div>
                                </div>

                            </div>
                        </div>

                    </div>
                </div>




            </div>


        </div>
    </div>



    <div class="row mb-12 g-6" id="grid" style="display: flex;">

        <div class="col-md-4 ">
            <div class="card">
                <div class="row g-0">
                    <div class="col-md-12 position-relative">
                        <a asp-action="EstimationDetails" asp-controller="Estimates">
                            <img class="card-img card-img-left card-img-height" src="~/img/elements/pexels-curtis-adams-1694007-3935333.jpg" alt="Card image" />
                        </a>

                        <div class="position-absolute end-0 top-0 dlt-btn">
                            <button data-bs-toggle="modal"
                                    data-bs-target="#delete" class="border-0 dtl-btn" id="confirm-text">
                                <i class="ti ti-trash ti-md me-2 text-white me-lg-0 ti-lg"></i>
                            </button>
                        </div>
                    </div>
                    <div class="col-md-12">

                        <div class="card-body g-0">

                            <div class="col-md-12 mb-2">
                                <h5 class="card-title mb-0"><b>Insurance Sample</b></h5>
                                <p class="mb-1">Estimate No. : 890 329 2123</p>
                                <p class="card-text text-black">123 Sample Ave NW  Calgary, AB</p>
                            </div>


                            <div class="col-md-12 ps-0">
                              
                                <div class="d-flex justify-content-center align-items-center">
                                    <div class="col-md-6 rounded text-white status-dropdown">
                                        <select class="form-select text-capitalize">
                                            <option value="Requested" selected>Requested</option>
                                            <option value="Provided">Provided</option>
                                            <option value="Completed">Completed</option>
                                            <option value="Revised">Revised</option>
                                            <option value="Accepted">Accepted</option>
                                            <option value="Cancelled">Cancelled</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6 d-flex justify-content-end align-items-center">
                                        <p style="color:#b1acac !important" class="mb-0">Created 3 days ago.</p>
                                    </div>
                                </div>
                                



                            </div>



                        </div>



                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card">
                <div class="row g-0">
                    <div class="col-md-12 position-relative">
                        <a asp-action="EstimationDetails" asp-controller="Estimates">
                            <img class="card-img card-img-left card-img-height " src="~/img/elements/pexels-pixabay-164558.jpg" alt="Card image" />
                        </a>
                        <div class="position-absolute end-0 top-0 dlt-btn">
                            <button class="border-0 dtl-btn" data-bs-toggle="modal"
                               data-bs-target="#delete" id="confirm-text"><i class="ti ti-trash ti-md me-2 text-white me-lg-0 ti-lg"></i></button>
                        </div>
                    </div>
                    <div class="col-md-12">

                        <div class="card-body row g-0">

                            <div class="col-md-12 mb-2">
                                <h5 class="card-title mb-0"><b>Malarkey Sample</b></h5>
                                <p class="mb-1">Estimate No. : 890 329 2124</p>
                                <p class="card-text text-black">698 New York 52  Beacon, New York</p>
                            </div>

                            <div class="col-md-12 rounded text-white status-dropdown">

                                <div class="d-flex justify-content-center align-items-center">
                                    <div class="col-md-6 rounded text-white status-dropdown">
                                        <select class="form-select text-capitalize">
                                            <option value="Requested">Requested</option>
                                            <option value="Provided">Provided</option>
                                            <option value="Completed">Completed</option>
                                            <option value="Revised">Revised</option>
                                            <option value="Accepted" selected>Accepted</option>
                                            <option value="Cancelled">Cancelled</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6 d-flex justify-content-end align-items-center">
                                        <p style="color:#b1acac !important" class="mb-0"> Created 6 days ago.</p>
                                    </div>
                                </div>





                            </div>
                            @*  <div class="mt-5">
                            <button class="btn rounded-pill btn-outline-danger waves-effect w-100" id="confirm-text">Delete</button>
                            </div> *@

                        </div>


                    </div>



                </div>
            </div>
        </div>


        <div class="col-md-4">
            <div class="card">
                <div class="row g-0">
                    <div class="col-md-12 position-relative">
                        <a asp-action="EstimationDetails" asp-controller="Estimates">
                            <img class="card-img card-img-left card-img-height " src="~/img/elements/pexels-heyho-5997994.jpg" alt="Card image" />
                        </a>
                        <div class="position-absolute end-0 top-0 dlt-btn">
                            <button data-bs-toggle="modal"
                                    data-bs-target="#delete" class="border-0 dtl-btn" id="confirm-text">
                                <i class="ti ti-trash ti-md me-2 text-white me-lg-0 ti-lg"></i>
                            </button>
                        </div>
                    </div>
                    <div class="col-md-12">

                        <div class="card-body row g-0">

                            <div class="col-md-12 mb-2">
                                <h5 class="card-title mb-0"><b>Atlas Sample</b></h5>
                                <p class="mb-1">Estimate No. : 890 329 2125</p>
                                <p class="card-text text-black">123 Fake street Oak Lawn, illinois</p>
                            </div>



                            <div class="col-md-12 rounded text-white status-dropdown">


                                <div class="d-flex justify-content-center align-items-center">
                                    <div class="col-md-6 rounded text-white status-dropdown">
                                        <select class="form-select text-capitalize">
                                            <option value="Requested" selected>Requested</option>
                                            <option value="Provided">Provided</option>
                                            <option value="Completed">Completed</option>
                                            <option value="Revised">Revised</option>
                                            <option value="Accepted">Accepted</option>
                                            <option value="Cancelled">Cancelled</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6 d-flex justify-content-end align-items-center">
                                        <p style="color:#b1acac !important" class="mb-0">Created 1 week ago.</p>
                                    </div>
                                </div>

                               
                            </div>
                            @*  <div class="mt-5">
                            <button class="btn rounded-pill btn-outline-danger waves-effect w-100" id="confirm-text">Delete</button>
                            </div>
                            *@

                        </div>



                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card">
                <div class="row g-0">
                    <div class="col-md-12 position-relative">
                        <a asp-action="EstimationDetails" asp-controller="Estimates">
                            <img class="card-img card-img-left card-img-height" src="~/img/elements/pexels-pixabay-209315.jpg" alt="Card image" />
                        </a>
                        <div class="position-absolute end-0 top-0 dlt-btn">
                            <button data-bs-toggle="modal"
                                    data-bs-target="#delete" class="border-0 dtl-btn" id="confirm-text">
                                <i class="ti ti-trash ti-md me-2 text-white me-lg-0 ti-lg"></i>
                            </button>
                        </div>
                    </div>
                    <div class="col-md-12">

                        <div class="card-body row g-0">

                            <div class="col-md-12 mb-2">
                                <h5 class="card-title mb-0"> <b>Roofing Sample</b></h5>
                                <p class="mb-1">Estimate No. : 890 329 2126</p>
                                <p class="card-text text-black">123 Sample Ave NW Calgary, AB </p>
                            </div>


                            <div class="col-md-12 rounded text-white status-dropdown">

                                <div class="d-flex justify-content-center align-items-center">
                                    <div class="col-md-6 rounded text-white status-dropdown">
                                        <select class="form-select text-capitalize">
                                            <option value="Requested">Requested</option>
                                            <option value="Provided">Provided</option>
                                            <option value="Completed">Completed</option>
                                            <option value="Revised">Revised</option>
                                            <option value="Accepted" selected>Accepted</option>
                                            <option value="Cancelled">Cancelled</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6 d-flex justify-content-end align-items-center">
                                        <p style="color:#b1acac !important" class="mb-0">Created 2 months ago.</p>
                                    </div>
                                </div>


                           
                            </div>
                              


                            </div>
                            @*  <div class="mt-5">
                            <button class="btn rounded-pill btn-outline-danger waves-effect w-100" id="confirm-text">Delete</button>
                            </div> *@


                        </div>



                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card">
                <div class="row g-0">
                    <div class="col-md-12 position-relative">
                        <a asp-action="EstimationDetails" asp-controller="Estimates">
                            <img class="card-img card-img-left card-img-height" src="~/img/elements/pexels-pixabay-259588.jpg" alt="Card image" />
                        </a>
                        <div class="position-absolute end-0 top-0 dlt-btn">
                            <button data-bs-toggle="modal"
                                    data-bs-target="#delete" class="border-0 dtl-btn" id="confirm-text">
                                <i class="ti ti-trash ti-md me-2 text-white me-lg-0 ti-lg"></i>
                            </button>
                        </div>
                    </div>
                    <div class="col-md-12">

                        <div class="card-body row g-0">

                            <div class="col-md-12 mb-2">
                                <h5 class="card-title mb-0"> <b>Insurance Sample</b></h5>
                                <p class="mb-1">Estimate No. : 890 329 2123</p>
                                <p class="card-text text-black">123 Sample Ave NW  Calgary, AB  </p>
                            </div>


                        <div class="col-md-12 rounded text-white status-dropdown">
                            <div class="d-flex justify-content-center align-items-center">
                                <div class="col-md-6 rounded text-white status-dropdown">
                                    <select class="form-select text-capitalize">
                                        <option value="Requested">Requested</option>
                                        <option value="Provided">Provided</option>
                                        <option value="Accepted">Accepted</option>
                                        <option value="Completed">Completed</option>
                                        <option value="Revised">Revised</option>
                                        <option value="Cancelled" selected>Cancelled</option>
                                    </select>
                                </div>
                                <div class="col-md-6 d-flex justify-content-end align-items-center">
                                    <p style="color:#b1acac !important" class="mb-0">Created 3 years ago.</p>
                                </div>
                            </div>

                       
                        </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <div id="list" style="display: none;">
      
        <!-- Users List Table -->
        <div class="card">

            <div class="card-datatable table-responsive">
                <table class="datatables-estimate table">
                    <thead class="border-top bg-menu-theme text-white">
                        <tr>
                           @*  <th class="text-white"></th> *@
@*                             <th class="text-white"></th>
 *@                            
                            <th class="text-white">No.</th>
                            <th class="text-white">Name</th>
                            <th class="text-white"> Address</th>
                            <th class="text-white"> Estimator</th>
                            <th class="text-white"> Created</th>
                            <th class="text-white">Status</th>
                            @* <th class="text-white">Role</th>
                            <th class="text-white">Status</th> *@
                         @*    <th class="text-white">Revenue</th> *@
                        </tr>
                    </thead>
                </table>
            </div>
          
        </div>



    </div>


    <!--Script for grid and list view-->
    <script>
        function switchToGrid() {
            // Hide the list view and show the grid view
            document.getElementById("list").style.display = "none";
            document.getElementById("grid").style.display = "flex";
        }

        function switchToList() {
            // Hide the grid view and show the list view
            document.getElementById("grid").style.display = "none";
            document.getElementById("list").style.display = "block";
        }

    </script>

    <!--Modal for Delete button-->
    <!--Modal for Sign out-->
    <div class="modal fade" id="delete" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalCenterTitle">Do you want to delete this estimate?</h5><br />


                </div>


                <div class="modal-footer">
                    <a class="btn btn-label-secondary" data-bs-dismiss="modal">
                        Yes
                    </a>
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal">No</button>
                </div>
            </div>
        </div>
    </div>



</div>

<!--Script for drop down colour-->


<script>
    // Function to update the background and text color of each dropdown
    function updateBackgroundColor(selectElement) {
        var selectedValue = selectElement.value;
        var parentDiv = selectElement.closest('.status-dropdown'); // Get the parent div with class 'status-dropdown'

        // Reset background and text color classes
        parentDiv.classList.remove("bg-success", "bg-primary", "bg-secondary", "bg-danger", "bg-blue", "text-white", "text-dark");

        // Apply the correct background and text color based on the selected value
        if (selectedValue === "Accepted") {
            parentDiv.classList.add("bg-success", "text-white"); // Green background, white text
        } else if (selectedValue === "Requested") {
            parentDiv.classList.add("bg-primary", "text-white"); // Blue background, white text
        } else if (selectedValue === "Provided") {
            parentDiv.classList.add("bg-secondary", "text-dark"); // Grey background, dark text
        } else if (selectedValue === "Cancelled") {
            parentDiv.classList.add("bg-danger", "text-white"); // Red background, white text
        } else if (selectedValue === "Revised") {
            parentDiv.classList.add("bg-success", "text-white"); // Red background, white text
        } else if (selectedValue === "Completed") {
            parentDiv.classList.add("bg-blue", "text-white"); // Red background, white text
        }
    }

    // Set the background color on page load for all dropdowns
    window.addEventListener('load', function () {
        var selectElements = document.querySelectorAll('.status-dropdown select');
        selectElements.forEach(function (selectElement) {
            updateBackgroundColor(selectElement); // Apply background color based on current selection
        });
    });

    // Listen for changes on each select dropdown
    document.querySelectorAll('.status-dropdown select').forEach(function (selectElement) {
        selectElement.addEventListener("change", function () {
            updateBackgroundColor(selectElement); // Update background color when selection changes
        });
    });
</script>
